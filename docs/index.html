<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Interface to the Perspective API • peRspective</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Interface to the Perspective API">
<meta property="og:description" content="Interface to the Perspective API, which can be found at the following URL: &lt;https://github.com/conversationai/perspectiveapi#perspective-comment-analyzer-api&gt;. 
    The Perspective API uses machine learning models to score the perceived impact a comment might have on a conversation (i.e. TOXICITY, INFLAMMATORY, etc.).     
    peRspective provides access to the API and returns tidy data frames with results of the specified machine learning model(s).">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">peRspective</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/favstats/peRspective/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="perspective-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#perspective-" class="anchor"></a>peRspective <img src="reference/figures/perspective.png" width="160px" align="right">
</h1></div>

<p>Perspective is an API that uses machine learning models to score the perceived impact a comment might have on a conversation. <a href="http://www.perspectiveapi.com/">Website</a>.</p>
<p><code>peRspective</code> provides access to the API using the R programming language.</p>
<p>For an excellent documentation of the Perspective API see <a href="https://github.com/conversationai/perspectiveapi/tree/master/2-api">here</a>.</p>
<blockquote>
<p>This is a work-in-progress project and I welcome feedback and pull requests!</p>
</blockquote>
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<ul>
<li><a href="https://github.com/favstats/peRspective#setup">Setup</a></li>
<li><a href="https://github.com/favstats/peRspective#models">Models</a></li>
<li>
<a href="https://github.com/favstats/peRspective#usage">Usage</a>
<ul>
<li><a href="https://github.com/favstats/peRspective#prsp_score"><code>prsp_score</code></a></li>
<li><a href="https://github.com/favstats/peRspective#prsp_stream"><code>prsp_stream</code></a></li>
</ul>
</li>
</ul>
</div>
<div id="setup" class="section level2">
<h2 class="hasAnchor">
<a href="#setup" class="anchor"></a>Setup</h2>
<div id="get-an-api-key" class="section level3">
<h3 class="hasAnchor">
<a href="#get-an-api-key" class="anchor"></a>Get an API key</h3>
<p><a href="https://github.com/conversationai/perspectiveapi/tree/master/1-get-started#prerequisites">Follow these steps</a> as outlined by the Perspective API to get an API key.</p>
<p><strong>NOTE:</strong> Perspective API made some changes recently and you now have to apply for an API key via a Google Form.</p>
</div>
<div id="quota-and-character-length-limits" class="section level3">
<h3 class="hasAnchor">
<a href="#quota-and-character-length-limits" class="anchor"></a>Quota and character length Limits</h3>
<p>Be sure to check your quota limit! You can learn more about Perspective API quota limit by visiting <a href="https://console.cloud.google.com/apis/api/commentanalyzer.googleapis.com/quotas">your google cloud project’s Perspective API page</a>.</p>
<p>The maximum text size per request is 3000 bytes.</p>
</div>
</div>
<div id="models" class="section level2">
<h2 class="hasAnchor">
<a href="#models" class="anchor"></a>Models</h2>
<p>For detailed overview of the used models <a href="https://github.com/conversationai/perspectiveapi/blob/master/2-api/models.md">see here</a>.</p>
<div id="languages-in-production" class="section level3">
<h3 class="hasAnchor">
<a href="#languages-in-production" class="anchor"></a>Languages in production</h3>
<p>Currently, Perspective API has production <code>TOXICITY</code> and <code>SEVERE_TOXICITY</code> attributes in the following languages:</p>
<ul>
<li>English (en)</li>
<li>Spanish (es)</li>
<li>French (fr)</li>
<li>German (de)</li>
<li>Portuguese (pt)</li>
<li>Italian (it)</li>
<li>Russian (ru)</li>
</ul>
</div>
<div id="toxicity-attributes" class="section level3">
<h3 class="hasAnchor">
<a href="#toxicity-attributes" class="anchor"></a>Toxicity attributes</h3>
<table class="table">
<colgroup>
<col width="6%">
<col width="1%">
<col width="86%">
<col width="5%">
</colgroup>
<thead><tr class="header">
<th>Attribute name</th>
<th>Type</th>
<th>Description</th>
<th>Language</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>TOXICITY</code></td>
<td>prod.</td>
<td>Rude, disrespectful, or unreasonable comment that is likely to make people leave a discussion.</td>
<td>en, fr, es, de, it, pt, ru</td>
</tr>
<tr class="even">
<td><code>SEVERE_TOXICITY</code></td>
<td>prod.</td>
<td>A very hateful, aggressive, disrespectful comment or otherwise very likely to make a user leave a discussion or give up on sharing their perspective. This attribute is much less sensitive to comments that include positive uses of curse words, for example. A labelled dataset and details of the methodology can be found in the same toxicity dataset that is available for the toxicity attribute.</td>
<td>en, fr, es, de, it, pt, ru</td>
</tr>
<tr class="odd">
<td><code>TOXICITY_FAST</code></td>
<td>exp.</td>
<td>This attribute is similar to <code>TOXICITY</code>, but has lower latency and lower accuracy in its predictions. Unlike <code>TOXICITY</code>, this attribute returns summary scores as well as span scores. This attribute uses character-level n-grams fed into a logistic regression, a method that has been surprisingly effective at detecting abusive language.</td>
<td>en</td>
</tr>
<tr class="even">
<td><code>IDENTITY_ATTACK</code></td>
<td>exp.</td>
<td>Negative or hateful comments targeting someone because of their identity.</td>
<td>en, de, it, pt, ru</td>
</tr>
<tr class="odd">
<td><code>IDENTITY_ATTACK_EXPERIMENTAL</code></td>
<td>exp.</td>
<td></td>
<td>fr, es</td>
</tr>
<tr class="even">
<td><code>INSULT</code></td>
<td>exp.</td>
<td>Insulting, inflammatory, or negative comment towards a person or a group of people.</td>
<td>en, de, it, pt, ru</td>
</tr>
<tr class="odd">
<td><code>INSULT_EXPERIMENTAL</code></td>
<td>exp.</td>
<td></td>
<td>fr, es</td>
</tr>
<tr class="even">
<td><code>PROFANITY</code></td>
<td>exp.</td>
<td>Swear words, curse words, or other obscene or profane language.</td>
<td>en, de, it, pt, ru</td>
</tr>
<tr class="odd">
<td><code>PROFANITY_EXPERIMENTAL</code></td>
<td>exp.</td>
<td></td>
<td>fr, es</td>
</tr>
<tr class="even">
<td><code>THREAT</code></td>
<td>exp.</td>
<td>Describes an intention to inflict pain, injury, or violence against an individual or group.</td>
<td>en, de, it, pt, ru</td>
</tr>
<tr class="odd">
<td><code>THREAT_EXPERIMENTAL</code></td>
<td>exp.</td>
<td></td>
<td>fr, es</td>
</tr>
<tr class="even">
<td><code>SEXUALLY_EXPLICIT</code></td>
<td>exp.</td>
<td>Contains references to sexual acts, body parts, or other lewd content.</td>
<td>en</td>
</tr>
<tr class="odd">
<td><code>FLIRTATION</code></td>
<td>exp.</td>
<td>Pickup lines, complimenting appearance, subtle sexual innuendos, etc.</td>
<td>en</td>
</tr>
</tbody>
</table>
</div>
<div id="new-york-times-attributes" class="section level3">
<h3 class="hasAnchor">
<a href="#new-york-times-attributes" class="anchor"></a>New York Times attributes</h3>
<p>These attributes are experimental because they are trained on a single source of comments—New York Times (NYT) data tagged by their moderation team—and therefore may not work well for every use case.</p>
<table class="table">
<colgroup>
<col width="15%">
<col width="3%">
<col width="75%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th>Attribute name</th>
<th>Type</th>
<th>Description</th>
<th>Language</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>ATTACK_ON_AUTHOR</code></td>
<td>exp.</td>
<td>Attack on the author of an article or post.</td>
<td>en</td>
</tr>
<tr class="even">
<td><code>ATTACK_ON_COMMENTER</code></td>
<td>exp.</td>
<td>Attack on fellow commenter.</td>
<td>en</td>
</tr>
<tr class="odd">
<td><code>INCOHERENT</code></td>
<td>exp.</td>
<td>Difficult to understand, nonsensical.</td>
<td>en</td>
</tr>
<tr class="even">
<td><code>INFLAMMATORY</code></td>
<td>exp.</td>
<td>Intending to provoke or inflame.</td>
<td>en</td>
</tr>
<tr class="odd">
<td><code>LIKELY_TO_REJECT</code></td>
<td>exp.</td>
<td>Overall measure of the likelihood for the comment to be rejected according to the NYT’s moderation.</td>
<td>en</td>
</tr>
<tr class="even">
<td><code>OBSCENE</code></td>
<td>exp.</td>
<td>Obscene or vulgar language such as cursing.</td>
<td>en</td>
</tr>
<tr class="odd">
<td><code>SPAM</code></td>
<td>exp.</td>
<td>Irrelevant and unsolicited commercial content.</td>
<td>en</td>
</tr>
<tr class="even">
<td><code>UNSUBSTANTIAL</code></td>
<td>exp.</td>
<td>Trivial or short comments.</td>
<td>en</td>
</tr>
</tbody>
</table>
<p>A character vector that includes all<code>peRspective</code> supported models can be obtained like this:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
  <span class="fu">peRspective</span><span class="fu">::</span><span class="va"><a href="reference/prsp_models.html">prsp_models</a></span>,
  <span class="fu">peRspective</span><span class="fu">::</span><span class="va"><a href="reference/prsp_exp_models.html">prsp_exp_models</a></span>
<span class="op">)</span>
<span class="co">#&gt;  [1] "TOXICITY"                     "SEVERE_TOXICITY"             </span>
<span class="co">#&gt;  [3] "IDENTITY_ATTACK"              "INSULT"                      </span>
<span class="co">#&gt;  [5] "PROFANITY"                    "SEXUALLY_EXPLICIT"           </span>
<span class="co">#&gt;  [7] "THREAT"                       "FLIRTATION"                  </span>
<span class="co">#&gt;  [9] "ATTACK_ON_AUTHOR"             "ATTACK_ON_COMMENTER"         </span>
<span class="co">#&gt; [11] "INCOHERENT"                   "INFLAMMATORY"                </span>
<span class="co">#&gt; [13] "LIKELY_TO_REJECT"             "OBSCENE"                     </span>
<span class="co">#&gt; [15] "SPAM"                         "UNSUBSTANTIAL"               </span>
<span class="co">#&gt; [17] "TOXICITY_EXPERIMENTAL"        "SEVERE_TOXICITY_EXPERIMENTAL"</span>
<span class="co">#&gt; [19] "IDENTITY_ATTACK_EXPERIMENTAL" "INSULT_EXPERIMENTAL"         </span>
<span class="co">#&gt; [21] "PROFANITY_EXPERIMENTAL"       "THREAT_EXPERIMENTAL"</span></code></pre></div>
</div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>First, install package from GitHub:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"favstats/peRspective"</span><span class="op">)</span></code></pre></div>
<p>Load package:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/favstats/peRspective">peRspective</a></span><span class="op">)</span></code></pre></div>
<p>Also the <code>tidyverse</code> for examples.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></code></pre></div>
<p><strong>Define your key variable.</strong></p>
<p><code>peRspective</code> functions will read the API key from environment variable <code>perspective_api_key</code>. In order to add your key to your environment file, you can use the function <code>edit_r_environ()</code> from the <a href="https://usethis.r-lib.org/"><code>usethis</code> package</a>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/edit.html">edit_r_environ</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>This will open your .Renviron file in your text editor. Now, you can add the following line to it:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">perspective_api_key</span><span class="op">=</span><span class="st">"YOUR_API_KEY"</span></code></pre></div>
<p>Save the file and restart R for the changes to take effect.</p>
<p>Alternatively, you can provide an explicit definition of your API key with each function call using the <code>key</code> argument.</p>
<div id="prsp_score" class="section level3">
<h3 class="hasAnchor">
<a href="#prsp_score" class="anchor"></a><code>prsp_score</code>
</h3>
<p>Now you can use <code>prsp_score</code> to score your comments with various models provided by the Perspective API.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">my_text</span> <span class="op">&lt;-</span> <span class="st">"You wrote this? Wow. This is dumb and childish, please go f**** yourself."</span>

<span class="va">text_scores</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/prsp_score.html">prsp_score</a></span><span class="op">(</span>
           text <span class="op">=</span> <span class="va">my_text</span>, 
           languages <span class="op">=</span> <span class="st">"en"</span>,
           score_model <span class="op">=</span> <span class="fu">peRspective</span><span class="fu">::</span><span class="va"><a href="reference/prsp_models.html">prsp_models</a></span>
           <span class="op">)</span>

<span class="va">text_scores</span> <span class="op">%&gt;%</span> 
  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/gather.html">gather</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>key <span class="op">=</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder</a></span><span class="op">(</span><span class="va">key</span>, <span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">key</span>, <span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">ylim</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0.5</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Model"</span>, y <span class="op">=</span> <span class="st">"Probability"</span>, title <span class="op">=</span> <span class="st">"Perspective API Results"</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-9-1.png" width="100%"></p>
<p>A Trump Tweet:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trump_tweet</span> <span class="op">&lt;-</span> <span class="st">"The Fake News Media has NEVER been more Dishonest or Corrupt than it is right now. There has never been a time like this in American History. Very exciting but also, very sad! Fake News is the absolute Enemy of the People and our Country itself!"</span>

<span class="va">text_scores</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/prsp_score.html">prsp_score</a></span><span class="op">(</span>
           <span class="va">trump_tweet</span>, 
           score_sentences <span class="op">=</span> <span class="cn">F</span>,
           score_model <span class="op">=</span> <span class="fu">peRspective</span><span class="fu">::</span><span class="va"><a href="reference/prsp_models.html">prsp_models</a></span>
           <span class="op">)</span>

<span class="va">text_scores</span> <span class="op">%&gt;%</span> 
  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/gather.html">gather</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>key <span class="op">=</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder</a></span><span class="op">(</span><span class="va">key</span>, <span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">key</span>, <span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">ylim</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0.5</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Model"</span>, y <span class="op">=</span> <span class="st">"Probability"</span>, title <span class="op">=</span> <span class="st">"Perspective API Results"</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-11-1.png" width="100%"></p>
<p>Instead of scoring just entire comments you can also score individual sentences with <code>score_sentences = T</code>. In this case the Perspective API will automatically split your text into reasonable sentences and score them in addition to an overall score.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trump_tweet</span> <span class="op">&lt;-</span> <span class="st">"The Fake News Media has NEVER been more Dishonest or Corrupt than it is right now. There has never been a time like this in American History. Very exciting but also, very sad! Fake News is the absolute Enemy of the People and our Country itself!"</span>

<span class="va">text_scores</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/prsp_score.html">prsp_score</a></span><span class="op">(</span>
           <span class="va">trump_tweet</span>, 
           score_sentences <span class="op">=</span> <span class="cn">T</span>,
           score_model <span class="op">=</span> <span class="fu">peRspective</span><span class="fu">::</span><span class="va"><a href="reference/prsp_models.html">prsp_models</a></span>
           <span class="op">)</span>

<span class="va">text_scores</span> <span class="op">%&gt;%</span> 
  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html">unnest</a></span><span class="op">(</span><span class="va">sentence_scores</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">type</span>, <span class="va">score</span>, <span class="va">sentences</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/gather.html">gather</a></span><span class="op">(</span><span class="va">value</span>, <span class="va">key</span>, <span class="op">-</span><span class="va">sentences</span>, <span class="op">-</span><span class="va">score</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>key <span class="op">=</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder</a></span><span class="op">(</span><span class="va">key</span>, <span class="va">score</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">key</span>, <span class="va">score</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">sentences</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0.5</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Model"</span>, y <span class="op">=</span> <span class="st">"Probability"</span>, title <span class="op">=</span> <span class="st">"Perspective API Results"</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-13-1.png" width="100%"></p>
<p>You can also use Spanish (<code>es</code>) for <code>TOXICITY</code>, <code>SEVERE_TOXICITY</code> and <code>_EXPERIMENTAL</code> models.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">spanish_text</span> <span class="op">&lt;-</span> <span class="st">"gastan en cosas que de nada sirven-nunca tratan de saber la verdad del funcionalismo de nuestro sistema solar y origen del cosmos-falso por Kepler. LAS UNIVERSIDADES DEL MUNDO NO SABEN ANALIZAR VERDAD O MENTIRA-LO QUE DICE KEPLER"</span>


<span class="va">text_scores</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/prsp_score.html">prsp_score</a></span><span class="op">(</span>
           text <span class="op">=</span> <span class="va">spanish_text</span>, 
           languages <span class="op">=</span> <span class="st">"es"</span>,
           score_model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"TOXICITY"</span>, <span class="st">"SEVERE_TOXICITY"</span>, <span class="st">"INSULT_EXPERIMENTAL"</span><span class="op">)</span>
           <span class="op">)</span>

<span class="va">text_scores</span> <span class="op">%&gt;%</span> 
  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/gather.html">gather</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>key <span class="op">=</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder</a></span><span class="op">(</span><span class="va">key</span>, <span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">key</span>, <span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0.5</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span><span class="op">)</span>  <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Model"</span>, y <span class="op">=</span> <span class="st">"Probability"</span>, title <span class="op">=</span> <span class="st">"Perspective API Results"</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-15-1.png" width="100%"></p>
<p><strong>NOTE:</strong> Your provided text will be stored by the Perspective API for future research. This option is the default. If the supplied texts are private or any of the authors of the texts are below 13 years old, <code>doNotStore</code> should be set to <code>TRUE.</code></p>
</div>
<div id="prsp_stream" class="section level3">
<h3 class="hasAnchor">
<a href="#prsp_stream" class="anchor"></a><code>prsp_stream</code>
</h3>
<p>So far we have only seen how to get individual comments or sentences scored. But what if you would like to run the function for an entire dataset with a text column? This is where <code>prsp_stream</code> comes in. At its core <code>prsp_stream</code> is a loop implemented within <code><a href="https://purrr.tidyverse.org/reference/map.html">purrr::map</a></code> to iterate over your text column. To use it let’s first generate a mock tibble.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">text_sample</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span>
       ctext <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"You wrote this? Wow. This is dumb and childish, please go f**** yourself."</span>,
                 <span class="st">"I don't know what to say about this but it's not good. The commenter is just an idiot"</span>,
                 <span class="st">"This goes even further!"</span>,
                 <span class="st">"What the hell is going on?"</span>,
                 <span class="st">"Please. I don't get it. Explain it again"</span>,
                 <span class="st">"Annoying and irrelevant! I'd rather watch the paint drying on the wall!"</span><span class="op">)</span>,
       textid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"#efdcxct"</span>, <span class="st">"#ehfcsct"</span>, 
                  <span class="st">"#ekacxwt"</span>,  <span class="st">"#ewatxad"</span>, 
                  <span class="st">"#ekacswt"</span>,  <span class="st">"#ewftxwd"</span><span class="op">)</span>
       <span class="op">)</span></code></pre></div>
<p><code>prsp_stream</code> requires a <code>text</code> and <code>text_id</code> column. It wraps <code>prsp_score</code> and takes all its arguments. Let’s run the most basic version:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">text_sample</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/prsp_stream.html">prsp_stream</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">ctext</span>,
              text_id <span class="op">=</span> <span class="va">textid</span>,
              score_model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"TOXICITY"</span>, <span class="st">"SEVERE_TOXICITY"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Binding rows...</span>
<span class="co">#&gt; # A tibble: 6 x 3</span>
<span class="co">#&gt;   text_id  TOXICITY SEVERE_TOXICITY</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;dbl&gt;           &lt;dbl&gt;</span>
<span class="co">#&gt; 1 #efdcxct   0.959           0.846 </span>
<span class="co">#&gt; 2 #ehfcsct   0.932           0.534 </span>
<span class="co">#&gt; 3 #ekacxwt   0.0652          0.0248</span>
<span class="co">#&gt; 4 #ewatxad   0.605           0.319 </span>
<span class="co">#&gt; 5 #ekacswt   0.0734          0.0257</span>
<span class="co">#&gt; 6 #ewftxwd   0.350           0.137</span></code></pre></div>
<p>You receive a <code>tibble</code> with your desired scorings including the <code>text_id</code> to match your score with your original dataframe.</p>
<p>Now, the problem is that sometimes the call might fail at some point. It is therefore suggested to set <code>safe_output = TRUE</code>. This will put the function into a <code><a href="https://purrr.tidyverse.org/reference/safely.html">purrr::safely</a></code> environment to ensure that your function will keep running even if you encounter errors.</p>
<p>Let’s try it out with a new dataset that contains text that the Perspective API can’t score</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">text_sample</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span>
       ctext <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"You wrote this? Wow. This is dumb and childish, please go f**** yourself."</span>,
                 <span class="st">"I don't know what to say about this but it's not good. The commenter is just an idiot"</span>,
                 <span class="co">## empty string</span>
                 <span class="st">""</span>,
                 <span class="st">"This goes even further!"</span>,
                 <span class="st">"What the hell is going on?"</span>,
                 <span class="st">"Please. I don't get it. Explain it again"</span>,
                 <span class="co">## Gibberish</span>
                 <span class="st">"kdlfkmgkdfmgkfmg"</span>,
                 <span class="st">"Annoying and irrelevant! I'd rather watch the paint drying on the wall!"</span>,
                 <span class="co">## Gibberish</span>
                 <span class="st">"Hippi Hoppo"</span><span class="op">)</span>,
       textid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"#efdcxct"</span>, <span class="st">"#ehfcsct"</span>, 
                  <span class="st">"#ekacxwt"</span>,  <span class="st">"#ewatxad"</span>, 
                  <span class="st">"#ekacswt"</span>,  <span class="st">"#ewftxwd"</span>, 
                  <span class="st">"#eeadswt"</span>,  <span class="st">"#enfhxed"</span>,
                  <span class="st">"#efdmjd"</span><span class="op">)</span>
       <span class="op">)</span></code></pre></div>
<p>And run the function with <code>safe_output = TRUE</code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">text_sample</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/prsp_stream.html">prsp_stream</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">ctext</span>,
              text_id <span class="op">=</span> <span class="va">textid</span>,
              score_model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"TOXICITY"</span>, <span class="st">"SEVERE_TOXICITY"</span>, <span class="st">"INSULT"</span><span class="op">)</span>,
              safe_output <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 9 x 5</span>
<span class="co">#&gt;   text_id  error                                TOXICITY SEVERE_TOXICITY  INSULT</span>
<span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;                                   &lt;dbl&gt;           &lt;dbl&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt; 1 #efdcxct "No Error"                             0.959           0.846   0.958 </span>
<span class="co">#&gt; 2 #ehfcsct "No Error"                             0.932           0.534   0.960 </span>
<span class="co">#&gt; 3 #ekacxwt "Error in .f(...): HTTP 400\nINVALI~  NA              NA      NA     </span>
<span class="co">#&gt; 4 #ewatxad "No Error"                             0.0652          0.0248  0.0309</span>
<span class="co">#&gt; 5 #ekacswt "No Error"                             0.605           0.319   0.322 </span>
<span class="co">#&gt; 6 #ewftxwd "No Error"                             0.0734          0.0257  0.0396</span>
<span class="co">#&gt; 7 #eeadswt "No Error"                             0.143           0.0871  0.131 </span>
<span class="co">#&gt; 8 #enfhxed "No Error"                             0.350           0.137   0.440 </span>
<span class="co">#&gt; 9 #efdmjd  "Error in .f(...): HTTP 400\nINVALI~  NA              NA      NA</span></code></pre></div>
<p><code>safe_output = T</code> will also provide us with the error messages that occured so that we can check what went wrong!</p>
<p>Finally, there is one last argument: <code>verbose = TRUE</code>. Enable this argument and thanks to <a href="https://github.com/r-lib/crayon"><code>crayon</code></a> you will receive beautiful console output that guides you along the way, showing you errors and text scores as you go.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">text_sample</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="reference/prsp_stream.html">prsp_stream</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">ctext</span>,
              text_id <span class="op">=</span> <span class="va">textid</span>,
              score_model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"TOXICITY"</span>, <span class="st">"SEVERE_TOXICITY"</span><span class="op">)</span>,
              verbose <span class="op">=</span> <span class="cn">T</span>,
              safe_output <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/prsp_stream_output.png"></p>
<p>Or the (not as pretty) output in Markdown</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="co">#&gt; 11.11% [2020-12-24 16:25:21]: 1 out of 9 (11.11%)</span></span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="co">#&gt; text_id: #efdcxct</span></span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="co">#&gt;  0.96 TOXICITY</span></span>
<span id="cb16-4"><a href="#cb16-4"></a><span class="co">#&gt;  0.85 SEVERE_TOXICITY</span></span>
<span id="cb16-5"><a href="#cb16-5"></a><span class="co">#&gt; </span></span>
<span id="cb16-6"><a href="#cb16-6"></a><span class="co">#&gt; 22.22% [2020-12-24 16:25:22]: 2 out of 9 (22.22%)</span></span>
<span id="cb16-7"><a href="#cb16-7"></a><span class="co">#&gt; text_id: #ehfcsct</span></span>
<span id="cb16-8"><a href="#cb16-8"></a><span class="co">#&gt;  0.93 TOXICITY</span></span>
<span id="cb16-9"><a href="#cb16-9"></a><span class="co">#&gt;  0.53 SEVERE_TOXICITY</span></span>
<span id="cb16-10"><a href="#cb16-10"></a><span class="co">#&gt; </span></span>
<span id="cb16-11"><a href="#cb16-11"></a><span class="co">#&gt; 33.33% [2020-12-24 16:25:23]: 3 out of 9 (33.33%)</span></span>
<span id="cb16-12"><a href="#cb16-12"></a><span class="co">#&gt; text_id: #ekacxwt</span></span>
<span id="cb16-13"><a href="#cb16-13"></a><span class="co">#&gt; ERROR</span></span>
<span id="cb16-14"><a href="#cb16-14"></a><span class="co">#&gt; Error in .f(...): HTTP 400</span></span>
<span id="cb16-15"><a href="#cb16-15"></a><span class="co">#&gt; INVALID_ARGUMENT: Comment must be non-empty.</span></span>
<span id="cb16-16"><a href="#cb16-16"></a><span class="co">#&gt; NO SCORES</span></span>
<span id="cb16-17"><a href="#cb16-17"></a><span class="co">#&gt; </span></span>
<span id="cb16-18"><a href="#cb16-18"></a><span class="co">#&gt; 44.44% [2020-12-24 16:25:25]: 4 out of 9 (44.44%)</span></span>
<span id="cb16-19"><a href="#cb16-19"></a><span class="co">#&gt; text_id: #ewatxad</span></span>
<span id="cb16-20"><a href="#cb16-20"></a><span class="co">#&gt;  0.07 TOXICITY</span></span>
<span id="cb16-21"><a href="#cb16-21"></a><span class="co">#&gt;  0.02 SEVERE_TOXICITY</span></span>
<span id="cb16-22"><a href="#cb16-22"></a><span class="co">#&gt; </span></span>
<span id="cb16-23"><a href="#cb16-23"></a><span class="co">#&gt; 55.56% [2020-12-24 16:25:26]: 5 out of 9 (55.56%)</span></span>
<span id="cb16-24"><a href="#cb16-24"></a><span class="co">#&gt; text_id: #ekacswt</span></span>
<span id="cb16-25"><a href="#cb16-25"></a><span class="co">#&gt;  0.60 TOXICITY</span></span>
<span id="cb16-26"><a href="#cb16-26"></a><span class="co">#&gt;  0.32 SEVERE_TOXICITY</span></span>
<span id="cb16-27"><a href="#cb16-27"></a><span class="co">#&gt; </span></span>
<span id="cb16-28"><a href="#cb16-28"></a><span class="co">#&gt; 66.67% [2020-12-24 16:25:27]: 6 out of 9 (66.67%)</span></span>
<span id="cb16-29"><a href="#cb16-29"></a><span class="co">#&gt; text_id: #ewftxwd</span></span>
<span id="cb16-30"><a href="#cb16-30"></a><span class="co">#&gt;  0.07 TOXICITY</span></span>
<span id="cb16-31"><a href="#cb16-31"></a><span class="co">#&gt;  0.03 SEVERE_TOXICITY</span></span>
<span id="cb16-32"><a href="#cb16-32"></a><span class="co">#&gt; </span></span>
<span id="cb16-33"><a href="#cb16-33"></a><span class="co">#&gt; 77.78% [2020-12-24 16:25:28]: 7 out of 9 (77.78%)</span></span>
<span id="cb16-34"><a href="#cb16-34"></a><span class="co">#&gt; text_id: #eeadswt</span></span>
<span id="cb16-35"><a href="#cb16-35"></a><span class="co">#&gt;  0.14 TOXICITY</span></span>
<span id="cb16-36"><a href="#cb16-36"></a><span class="co">#&gt;  0.09 SEVERE_TOXICITY</span></span>
<span id="cb16-37"><a href="#cb16-37"></a><span class="co">#&gt; </span></span>
<span id="cb16-38"><a href="#cb16-38"></a><span class="co">#&gt; 88.89% [2020-12-24 16:25:29]: 8 out of 9 (88.89%)</span></span>
<span id="cb16-39"><a href="#cb16-39"></a><span class="co">#&gt; text_id: #enfhxed</span></span>
<span id="cb16-40"><a href="#cb16-40"></a><span class="co">#&gt;  0.35 TOXICITY</span></span>
<span id="cb16-41"><a href="#cb16-41"></a><span class="co">#&gt;  0.14 SEVERE_TOXICITY</span></span>
<span id="cb16-42"><a href="#cb16-42"></a><span class="co">#&gt; </span></span>
<span id="cb16-43"><a href="#cb16-43"></a><span class="co">#&gt; 100.00% [2020-12-24 16:25:30]: 9 out of 9 (100.00%)</span></span>
<span id="cb16-44"><a href="#cb16-44"></a><span class="co">#&gt; text_id: #efdmjd</span></span>
<span id="cb16-45"><a href="#cb16-45"></a><span class="co">#&gt; ERROR</span></span>
<span id="cb16-46"><a href="#cb16-46"></a><span class="co">#&gt; Error in .f(...): HTTP 400</span></span>
<span id="cb16-47"><a href="#cb16-47"></a><span class="co">#&gt; INVALID_ARGUMENT: Attribute TOXICITY does not support request languages: ja-Latn</span></span>
<span id="cb16-48"><a href="#cb16-48"></a><span class="co">#&gt; NO SCORES</span></span>
<span id="cb16-49"><a href="#cb16-49"></a><span class="co">#&gt; # A tibble: 9 x 4</span></span>
<span id="cb16-50"><a href="#cb16-50"></a><span class="co">#&gt;   text_id  error                                        TOXICITY SEVERE_TOXICITY</span></span>
<span id="cb16-51"><a href="#cb16-51"></a><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;                                           &lt;dbl&gt;           &lt;dbl&gt;</span></span>
<span id="cb16-52"><a href="#cb16-52"></a><span class="co">#&gt; 1 #efdcxct "No Error"                                     0.959           0.846 </span></span>
<span id="cb16-53"><a href="#cb16-53"></a><span class="co">#&gt; 2 #ehfcsct "No Error"                                     0.932           0.534 </span></span>
<span id="cb16-54"><a href="#cb16-54"></a><span class="co">#&gt; 3 #ekacxwt "Error in .f(...): HTTP 400\nINVALID_ARGUME~  NA              NA     </span></span>
<span id="cb16-55"><a href="#cb16-55"></a><span class="co">#&gt; 4 #ewatxad "No Error"                                     0.0652          0.0248</span></span>
<span id="cb16-56"><a href="#cb16-56"></a><span class="co">#&gt; 5 #ekacswt "No Error"                                     0.605           0.319 </span></span>
<span id="cb16-57"><a href="#cb16-57"></a><span class="co">#&gt; 6 #ewftxwd "No Error"                                     0.0734          0.0257</span></span>
<span id="cb16-58"><a href="#cb16-58"></a><span class="co">#&gt; 7 #eeadswt "No Error"                                     0.143           0.0871</span></span>
<span id="cb16-59"><a href="#cb16-59"></a><span class="co">#&gt; 8 #enfhxed "No Error"                                     0.350           0.137 </span></span>
<span id="cb16-60"><a href="#cb16-60"></a><span class="co">#&gt; 9 #efdmjd  "Error in .f(...): HTTP 400\nINVALID_ARGUME~  NA              NA</span></span></code></pre></div>
</div>
</div>
<div id="citation" class="section level2">
<h2 class="hasAnchor">
<a href="#citation" class="anchor"></a>Citation</h2>
<p>Thank you for using peRspective! Please consider citing:</p>
<p>Votta, Fabio. (2019). peRspective: A wrapper for the Perspective API. Source: <a href="https://github.com/favstats" class="uri">https://github.com/favstats</a>.</p>
<div>
<p>Icons made by <a href="https://www.freepik.com/?__hstc=57440181.1504a979705d81fb44d4169a0ccdf2ae.1558036002089.1558036002089.1558036002089.1&amp;__hssc=57440181.4.1558036002090&amp;__hsfp=2902986854" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=peRspective">https://​cloud.r-project.org/​package=peRspective</a>
</li>
<li>Browse source code at <br><a href="https://github.com/favstats/peRspective/">https://​github.com/​favstats/​peRspective/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/favstats/peRspective">https://​github.com/​favstats/​peRspective</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Fabio Votta <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.rstudio.com/web/packages/peRspective/index.html"><img src="https://cranlogs.r-pkg.org/badges/grand-total/peRspective"></a></li>
<li><a href="https://travis-ci.org/favstats/peRspective"><img src="https://travis-ci.org/favstats/peRspective.svg?branch=master"></a></li>
<li><a href="https://cran.r-project.org/package=peRspective"><img src="https://www.r-pkg.org/badges/version/peRspective?color=blue"></a></li>
<li><a href="https://codecov.io/gh/favstats/peRspective?branch=master"><img src="https://codecov.io/gh/favstats/peRspective/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://github.com/favstats/peRspective"><img src="https://img.shields.io/github/languages/code-size/favstats/peRspective.svg"></a></li>
<li><a href="https://github.com/favstats/peRspective/commits/master"><img src="https://img.shields.io/github/last-commit/favstats/peRspective.svg"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Fabio Votta.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
